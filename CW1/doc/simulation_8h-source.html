<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BEAST - Bioinspired Evolutionary Agent Simulation Toolkit: simulation.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>simulation.h</h1><a href="simulation_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00013 <span class="preprocessor">#ifndef _SIMULATION_H</span>
00014 <span class="preprocessor"></span><span class="preprocessor">#define _SIMULATION_H</span>
00015 <span class="preprocessor"></span>
00016 <span class="preprocessor">#include &lt;string&gt;</span>
00017 <span class="preprocessor">#include &lt;vector&gt;</span>
00018 <span class="preprocessor">#include &lt;map&gt;</span>
00019 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00020 <span class="preprocessor">#include &lt;functional&gt;</span>
00021 <span class="preprocessor">#include &lt;sstream&gt;</span>
00022 <span class="preprocessor">#include &lt;iostream&gt;</span>
00023 <span class="preprocessor">#include &lt;fstream&gt;</span>
00024 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
00025 
00026 <span class="preprocessor">#include "<a class="code" href="utilities_8h.html">utilities.h</a>"</span>
00027 <span class="preprocessor">#include "<a class="code" href="world_8h.html">world.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="animat_8h.html">animat.h</a>"</span>
00029 <span class="preprocessor">#include "<a class="code" href="serialfuncs_8h.html">serialfuncs.h</a>"</span>
00030 <span class="preprocessor">#include "<a class="code" href="unserialiser_8h.html">unserialiser.h</a>"</span>
00031 
00032 <span class="keyword">namespace </span>BEAST {
00033 
<a name="l00046"></a><a class="code" href="classBEAST_1_1SimObject.html">00046</a> <span class="keyword">class </span><a class="code" href="classBEAST_1_1SimObject.html">SimObject</a>
00047 {
00048 <span class="keyword">public</span>:
<a name="l00050"></a><a class="code" href="classBEAST_1_1SimObject.html#a0">00050</a>     <span class="keyword">virtual</span> <a class="code" href="classBEAST_1_1SimObject.html#a0">~SimObject</a>(){}
00051 
<a name="l00053"></a><a class="code" href="classBEAST_1_1SimObject.html#a1">00053</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1SimObject.html#a1">BeginAssessment</a>(){ <a class="code" href="classBEAST_1_1SimObject.html#a7">AddToWorld</a>(); }
00054     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    EndAssessment(){}
<a name="l00056"></a><a class="code" href="classBEAST_1_1SimObject.html#a3">00056</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1SimObject.html#a3">BeginGeneration</a>(){}
00057     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    EndGeneration(){}
<a name="l00059"></a><a class="code" href="classBEAST_1_1SimObject.html#a5">00059</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1SimObject.html#a5">BeginRun</a>(){}
00060     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    EndRun(){}
00061 
00063     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1SimObject.html#a7">AddToWorld</a>() = 0;
<a name="l00065"></a><a class="code" href="classBEAST_1_1SimObject.html#a8">00065</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1SimObject.html#a8">Serialise</a>(std::ostream&amp;)<span class="keyword">const</span>{}
<a name="l00067"></a><a class="code" href="classBEAST_1_1SimObject.html#a9">00067</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1SimObject.html#a9">Unserialise</a>(std::istream&amp;){}
00069     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classBEAST_1_1SimObject.html#a10">Save</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>*)<span class="keyword">const</span>;
00071     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classBEAST_1_1SimObject.html#a11">Load</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>*);
00072 
<a name="l00074"></a><a class="code" href="classBEAST_1_1SimObject.html#a12">00074</a>     <a class="code" href="classBEAST_1_1World.html">World</a>&amp;          <a class="code" href="classBEAST_1_1SimObject.html#a12">GetWorld</a>()<span class="keyword">const</span>     { <span class="keywordflow">return</span> *myWorld; }
<a name="l00076"></a><a class="code" href="classBEAST_1_1SimObject.html#a13">00076</a>     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1SimObject.html#a13">SetWorld</a>(<a class="code" href="classBEAST_1_1World.html">World</a>* w) { myWorld = w; }
00077 
00078     <span class="keyword">virtual</span> std::string ToString()<span class="keyword">const</span>{ <span class="keywordflow">return</span> <span class="stringliteral">""</span>; }
00079 
00080 <span class="keyword">private</span>:
00082     World*          myWorld;
00083 };
00084 
00086 std::ostream&amp; <a class="code" href="group__biosystems.html#a2">operator&lt;&lt;</a>(std::ostream&amp; out, <span class="keyword">const</span> SimObject&amp; obj);
00088 std::istream&amp; <a class="code" href="group__biosystems.html#a3">operator&gt;&gt;</a>(std::istream&amp; in, SimObject&amp; obj);
00089 
00100 <span class="keyword">template</span> &lt;<span class="keyword">class</span> _ObjType&gt;
<a name="l00101"></a><a class="code" href="classBEAST_1_1Group.html">00101</a> <span class="keyword">class </span><a class="code" href="classBEAST_1_1Group.html">Group</a> : <span class="keyword">public</span> <a class="code" href="classBEAST_1_1SimObject.html">SimObject</a>, <span class="keyword">public</span> std::vector&lt;_ObjType*&gt;
00102 {
00103 <span class="keyword">public</span>:
00104     <span class="keyword">typedef</span> _ObjType object_type;
00105     
00106     <a class="code" href="group__framework.html#a29">Group</a>(<span class="keywordtype">int</span> s = 0);
<a name="l00110"></a><a class="code" href="classBEAST_1_1Group.html#a1">00110</a>     <span class="keyword">virtual</span> <a class="code" href="classBEAST_1_1Group.html#a1">~Group</a>()
00111     {
00112         std::for_each(begin(), end(), <a class="code" href="structBEAST_1_1deleter.html">deleter&lt;_ObjType&gt;</a>());
00113     }
00114 
00115     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="group__framework.html#a30">AddToWorld</a>();
00116 
<a name="l00121"></a><a class="code" href="classBEAST_1_1Group.html#a3">00121</a>     <span class="keywordtype">void</span> <a class="code" href="classBEAST_1_1Group.html#a3">ForEach</a>(<span class="keywordtype">void</span> (_ObjType::*method)())
00122     {   <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;</a>::iterator i = begin(); i != end(); ++i)
00123             ((*i)-&gt;*method)();
00124     }
00125 
00130     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Arg&gt;
<a name="l00131"></a><a class="code" href="classBEAST_1_1Group.html#a4">00131</a>     <span class="keywordtype">void</span> <a class="code" href="classBEAST_1_1Group.html#a3">ForEach</a>(<span class="keywordtype">void</span> (_ObjType::*method)(_Arg), _Arg arg)
00132     {   <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;</a>::iterator i = begin(); i != end(); ++i)
00133             ((*i)-&gt;*method)(arg);
00134     }
00135 
00141     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Result&gt;
<a name="l00142"></a><a class="code" href="classBEAST_1_1Group.html#a5">00142</a>     <span class="keywordtype">void</span> <a class="code" href="classBEAST_1_1Group.html#a3">ForEach</a>(_Result (_ObjType::*method)())
00143     {   <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;</a>::iterator i = begin(); i != end(); ++i)
00144             ((*i)-&gt;*method)();
00145     }
00146 
00153     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Result, <span class="keyword">typename</span> _Arg&gt;
<a name="l00154"></a><a class="code" href="classBEAST_1_1Group.html#a6">00154</a>     <span class="keywordtype">void</span> <a class="code" href="classBEAST_1_1Group.html#a3">ForEach</a>(_Result (_ObjType::*method)(_Arg), _Arg arg)
00155     {   <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;</a>::iterator i = begin(); i != end(); ++i)
00156             ((*i)-&gt;*method)(arg);
00157     }
00158 
00159     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="group__framework.html#a31">Serialise</a>(std::ostream&amp;)<span class="keyword">const</span>;
00160     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="group__framework.html#a32">Unserialise</a>(std::istream&amp;);
00161 };
00162 
<a name="l00164"></a><a class="code" href="group__framework.html#a21">00164</a> <span class="keyword">enum</span> <a class="code" href="group__framework.html#a21">SimPrintStyleType</a>
00165 {
00166     <a class="code" href="group__framework.html#a21a70">SIM_PRINT_STATUS</a>,       
00167     <a class="code" href="group__framework.html#a21a71">SIM_PRINT_ASSESSMENT</a>,   
00168     <a class="code" href="group__framework.html#a21a72">SIM_PRINT_GENERATION</a>,   
00169     <a class="code" href="group__framework.html#a21a73">SIM_PRINT_RUN</a>,          
00170     <a class="code" href="group__framework.html#a21a74">SIM_PRINT_COMPLETE</a>      
00171 };
00172 
<a name="l00186"></a><a class="code" href="classBEAST_1_1Simulation.html">00186</a> <span class="keyword">class </span><a class="code" href="classBEAST_1_1Simulation.html">Simulation</a>
00187 {
00188 <span class="keyword">public</span>:
<a name="l00190"></a><a class="code" href="classBEAST_1_1Simulation.html#a0">00190</a>     <a class="code" href="classBEAST_1_1Simulation.html#a0">Simulation</a>():
00191         runs(1), generations(0), assessments(1), timeSteps(1000),
00192         logStream(NULL){}
00193 
00194     <span class="keyword">virtual</span> ~<a class="code" href="classBEAST_1_1Simulation.html#a0">Simulation</a>(){}
00195 
00196     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1Simulation.html#a2">Init</a>();
00197     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classBEAST_1_1Simulation.html#a3">Update</a>();
00198     <span class="keywordtype">void</span>            Display();
00199     std::string     <a class="code" href="classBEAST_1_1Simulation.html#a5">ToString</a>(SimPrintStyleType s = SIM_PRINT_STATUS)<span class="keyword">const</span>;
00200 
<a name="l00202"></a><a class="code" href="classBEAST_1_1Simulation.html#a6">00202</a>     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a6">Add</a>(std::string name, <a class="code" href="classBEAST_1_1SimObject.html">SimObject</a>&amp; pop) { contents[name] = &amp;pop; }
00203 
00204     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a7">ResetRun</a>();
00205     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a8">ResetGeneration</a>();
00206     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a9">ResetAssessment</a>();
00207 
<a name="l00210"></a><a class="code" href="classBEAST_1_1Simulation.html#a10">00210</a>     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a10">SetRuns</a>(<span class="keywordtype">int</span> r)          { runs = r; }
<a name="l00213"></a><a class="code" href="classBEAST_1_1Simulation.html#a11">00213</a>     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a11">SetGenerations</a>(<span class="keywordtype">int</span> g)   { generations = g; }
<a name="l00215"></a><a class="code" href="classBEAST_1_1Simulation.html#a12">00215</a>     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a12">SetAssessments</a>(<span class="keywordtype">int</span> a)   { assessments = a; }
<a name="l00217"></a><a class="code" href="classBEAST_1_1Simulation.html#a13">00217</a>     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a13">SetTimeSteps</a>(<span class="keywordtype">int</span> t)     { timeSteps = t; }
00218 
<a name="l00220"></a><a class="code" href="classBEAST_1_1Simulation.html#a14">00220</a>     <span class="keywordtype">void</span>            <a class="code" href="classBEAST_1_1Simulation.html#a14">SetLogStream</a>(std::ostream&amp; o)
00221                     { logStream = &amp;o; WorldObject::SetLogStream(o); }
00222 
<a name="l00224"></a><a class="code" href="classBEAST_1_1Simulation.html#a15">00224</a>     <span class="keywordtype">bool</span>            <a class="code" href="classBEAST_1_1Simulation.html#a15">HasSimObject</a>(std::string n) { <span class="keywordflow">return</span> contents.find(n) != contents.end(); }
<a name="l00226"></a><a class="code" href="classBEAST_1_1Simulation.html#a16">00226</a>     <a class="code" href="classBEAST_1_1SimObject.html">SimObject</a>&amp;      <a class="code" href="classBEAST_1_1Simulation.html#a16">GetSimObject</a>(std::string n) { <span class="keywordflow">return</span> *contents[n]; }
<a name="l00228"></a><a class="code" href="classBEAST_1_1Simulation.html#a17">00228</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a17">GetRun</a>()<span class="keyword">const</span>           { <span class="keywordflow">return</span> run; }
<a name="l00230"></a><a class="code" href="classBEAST_1_1Simulation.html#a18">00230</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a18">GetGeneration</a>()<span class="keyword">const</span>    { <span class="keywordflow">return</span> generation; }
<a name="l00232"></a><a class="code" href="classBEAST_1_1Simulation.html#a19">00232</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a19">GetAssessment</a>()<span class="keyword">const</span>    { <span class="keywordflow">return</span> assessment; }
<a name="l00234"></a><a class="code" href="classBEAST_1_1Simulation.html#a20">00234</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a20">GetTimeStep</a>()<span class="keyword">const</span>      { <span class="keywordflow">return</span> timeStep; }
00235 
<a name="l00237"></a><a class="code" href="classBEAST_1_1Simulation.html#a21">00237</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a21">GetTotalRuns</a>()<span class="keyword">const</span>     { <span class="keywordflow">return</span> runs; }
<a name="l00239"></a><a class="code" href="classBEAST_1_1Simulation.html#a22">00239</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a22">GetTotalGenerations</a>()<span class="keyword">const</span> { <span class="keywordflow">return</span> generations; }
<a name="l00241"></a><a class="code" href="classBEAST_1_1Simulation.html#a23">00241</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a23">GetTotalAssessments</a>()<span class="keyword">const</span> { <span class="keywordflow">return</span> assessments; }
<a name="l00243"></a><a class="code" href="classBEAST_1_1Simulation.html#a24">00243</a>     <span class="keywordtype">int</span>             <a class="code" href="classBEAST_1_1Simulation.html#a24">GetTotalTimeSteps</a>()<span class="keyword">const</span>{ <span class="keywordflow">return</span> timeSteps; }
00244 
<a name="l00246"></a><a class="code" href="classBEAST_1_1Simulation.html#a25">00246</a>     std::ostream&amp;   <a class="code" href="classBEAST_1_1Simulation.html#a25">GetLogStream</a>()          { <span class="keywordflow">return</span> *logStream; }
00247 
<a name="l00249"></a><a class="code" href="classBEAST_1_1Simulation.html#a26">00249</a>     <a class="code" href="classBEAST_1_1World.html">World</a>&amp;          <a class="code" href="classBEAST_1_1Simulation.html#a26">GetWorld</a>()              { <span class="keywordflow">return</span> theWorld; }
00250 
00251     <span class="keyword">const</span> std::map&lt;std::string, SimObject*&gt;&amp;
00252                     GetContents()<span class="keyword">const</span>      { <span class="keywordflow">return</span> contents; }
00253 
00254 <span class="keyword">protected</span>:
00255     <span class="keywordtype">void</span>            Generate();
00256     <span class="keywordtype">void</span>            TimeUp();
00257 
00258     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1Simulation.html#b2">BeginAssessment</a>();
00259     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1Simulation.html#b3">EndAssessment</a>();
00260     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1Simulation.html#b4">BeginGeneration</a>();
00261     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1Simulation.html#b5">EndGeneration</a>();
00262     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1Simulation.html#b6">BeginRun</a>();
00263     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1Simulation.html#b7">EndRun</a>();
00264 
00265     std::map&lt;std::string, SimObject*&gt;&amp;
00266                     GetContents()           { <span class="keywordflow">return</span> contents; }
00267 
00268 <span class="keyword">private</span>:
00273     World           theWorld;
00275     std::map&lt;std::string, SimObject*&gt; contents;
00276 
00277     <span class="keywordtype">int</span>             runs;           
00278     <span class="keywordtype">int</span>             generations;    
00279     <span class="keywordtype">int</span>             assessments;    
00280     <span class="keywordtype">int</span>             timeSteps;      
00281 
00282     <span class="keywordtype">int</span>             run;            
00283     <span class="keywordtype">int</span>             generation;     
00284     <span class="keywordtype">int</span>             assessment;     
00285     <span class="keywordtype">int</span>             timeStep;       
00286     <span class="keywordtype">bool</span>            complete;       
00287 
00288     std::ostream*   logStream;      
00289 };
00290 
00295 <span class="keyword">template</span> &lt;<span class="keyword">class</span> _ObjType&gt;
<a name="l00296"></a><a class="code" href="classBEAST_1_1Group.html#a29">00296</a> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;::Group</a>(<span class="keywordtype">int</span> s): std::vector&lt;_ObjType*&gt;(s)
00297 {
00298     std::generate(begin(), end(), <a class="code" href="structBEAST_1_1creator.html">creator&lt;_ObjType&gt;</a>());
00299 }
00300 
00302 <span class="keyword">template</span> &lt;<span class="keyword">class</span> _ObjType&gt;
<a name="l00303"></a><a class="code" href="classBEAST_1_1Group.html#a30">00303</a> <span class="keywordtype">void</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;::AddToWorld</a>()
00304 {
00305     <a class="code" href="classBEAST_1_1SimObject.html#a12">GetWorld</a>().<a class="code" href="classBEAST_1_1World.html#a4">Add</a>(*<span class="keyword">this</span>);
00306 }
00307 
00308 
00312 <span class="keyword">template</span> &lt;<span class="keyword">class</span> _ObjType&gt;
<a name="l00313"></a><a class="code" href="classBEAST_1_1Group.html#a31">00313</a> <span class="keywordtype">void</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;::Serialise</a>(std::ostream&amp; out)<span class="keyword">const</span>
00314 {
00315     std::string name = <a class="code" href="namespaceBEAST.html#a96">add_slashes</a>(std::string(<span class="stringliteral">"Group_"</span>)
00316                                    + <span class="keyword">typeid</span>(_ObjType).name());
00317     out &lt;&lt; name &lt;&lt; <span class="stringliteral">"\n"</span>
00318         &lt;&lt; static_cast&lt;int&gt;(size()) &lt;&lt; <span class="stringliteral">"\n"</span>;
00319 
00320     <span class="keyword">typename</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;</a>::const_iterator i = begin();
00321     <span class="keywordflow">for</span> (; i != end(); ++i) {
00322         out &lt;&lt; **i;
00323     }
00324 }
00325 
00329 <span class="keyword">template</span> &lt;<span class="keyword">class</span> _ObjType&gt;
<a name="l00330"></a><a class="code" href="classBEAST_1_1Group.html#a32">00330</a> <span class="keywordtype">void</span> <a class="code" href="classBEAST_1_1Group.html">Group&lt;_ObjType&gt;::Unserialise</a>(std::istream&amp; in)
00331 {
00332     std::string name, expName = <a class="code" href="namespaceBEAST.html#a96">add_slashes</a>(std::string(<span class="stringliteral">"Group_"</span>)
00333                                             + <span class="keyword">typeid</span>(_ObjType).name());
00334     in &gt;&gt; name;
00335     <span class="keywordflow">if</span> (name != expName) {
00336         <span class="keywordflow">throw</span> <a class="code" href="structBEAST_1_1SerialException.html">SerialException</a>(<a class="code" href="group__serialisation.html#a17a67">SERIAL_ERROR_WRONG_TYPE</a>, <a class="code" href="namespaceBEAST.html#a97">strip_slashes</a>(name), 
00337                               <span class="stringliteral">"This object is type "</span> + <a class="code" href="namespaceBEAST.html#a97">strip_slashes</a>(expName));
00338     }
00339 
00342 <span class="comment">//  GetWorld().Remove&lt;_ObjType&gt;();  // disabled because of some error with g++</span>
00343     <a class="code" href="classBEAST_1_1SimObject.html#a12">GetWorld</a>().<a class="code" href="classBEAST_1_1World.html#a12">CleanUp</a>();
00344     std::for_each(begin(), end(), <a class="code" href="structBEAST_1_1deleter.html">deleter&lt;_ObjType&gt;</a>());
00345     clear();
00346     
00347     <span class="keywordtype">int</span> size;
00348     in &gt;&gt; size;
00349 
00350     <a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>* wobj;
00351     _ObjType* obj;
00352 
00353     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; size; ++i) {
00354         wobj = Unserialiser::Instance()(in);
00355         obj = dynamic_cast&lt;_ObjType*&gt;(wobj);
00356         <span class="keywordflow">if</span> (obj != NULL) {
00357             push_back(obj);
00358         }
00359     }
00360 }
00361 
00362 <span class="comment">/*</span>
00363 <span class="comment"> * @}</span>
00364 <span class="comment"> */</span>
00365 
00366 } <span class="comment">// namespace BEAST</span>
00367 
00368 <span class="comment">// Population is included down here instead of including simulation.h at the</span>
00369 <span class="comment">// top of population.h, so that by including simulation.h the Population</span>
00370 <span class="comment">// template becomes available rather than vice-versa.</span>
00371 <span class="preprocessor">#include "population.h"</span>
00372 
00373 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Feb 1 21:25:35 2004 for BEAST - Bioinspired Evolutionary Agent Simulation Toolkit by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
