<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BEAST - Bioinspired Evolutionary Agent Simulation Toolkit: Braitenberg source code</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a name="braitenbergcode">Braitenberg source code</a>
</h1><div class="fragment"><pre><span class="comment">// Vim users: for increased viewing pleasure :set ts=4</span>

<span class="preprocessor">#include "<a class="code" href="beast_8h.html">beast.h</a>"</span>
<span class="preprocessor">#include "<a class="code" href="animat_8h.html">animat.h</a>"</span>
<span class="preprocessor">#include "<a class="code" href="sensor_8h.html">sensor.h</a>"</span>

<span class="keyword">using</span> <span class="keyword">namespace </span>BEAST;

<span class="comment">// Dots are just WorldObjects with the colour set to yellow and the</span>
<span class="comment">// radius set to 10. The constructor just allows you to specify a</span>
<span class="comment">// location. Dot relies on the default non-solid setting for </span>
<span class="comment">// WorldObject, which means that instead of bumping into Dots, Animats</span>
<span class="comment">// slide over them.</span>
<span class="keyword">class </span>Dot : <span class="keyword">public</span> WorldObject
{
<span class="keyword">public</span>:
    Dot(Vector2D l = Vector2D()):WorldObject(l, 0.0, 10.0){SetColour(ColourPalette[COLOUR_YELLOW]);}
    <span class="keyword">virtual</span> ~Dot(){}

    <span class="comment">// This simply adjusts the standard serialisation (save to file) code</span>
    <span class="comment">// so that the object remembers it's a 'Dot', rather than a</span>
    <span class="comment">// 'WorldObject' - since there are no properties in Dot which</span>
    <span class="comment">// WorldObject doesn't have, it's not necessary to add any new</span>
    <span class="comment">// serialisation code.</span>
    <a class="code" href="group__serialisation.html#a15">IMPLEMENT_SERIALISATION</a>(<span class="stringliteral">"Dot"</span>, WorldObject)
};

<span class="comment">// Braitenberg is a basic bot inherited from the Animat class, with two</span>
<span class="comment">// sensors representing the Braitenberg's left and right light sensors,</span>
<span class="comment">// a radius of 10 and a minimum speed of 0, ensuring that the Braitenberg</span>
<span class="comment">// does not go backwards when its control output is 0.</span>
<span class="keyword">class </span>Braitenberg : <span class="keyword">public</span> Animat
{
<span class="keyword">public</span>:
    Braitenberg()
    {
        This.Add(<span class="stringliteral">"left"</span>, ProximitySensor&lt;Dot&gt;(PI/2, 75.0, -1));
        This.Add(<span class="stringliteral">"right"</span>, ProximitySensor&lt;Dot&gt;(PI/2, 75.0, 1));

        This.SetInitRandom(<span class="keyword">true</span>);

        This.SetMinSpeed(0.0);
        This.SetMaxSpeed(95.0);

        This.Radius = 10.0;
    }
};

<span class="comment">// This is a Braitenberg with the control function overloaded so that the</span>
<span class="comment">// left sensor feeds the left motor, and the right sensor feeds the right</span>
<span class="comment">// motor.</span>
<span class="keyword">class </span>Braitenberg2a : <span class="keyword">public</span> Braitenberg
{
<span class="keyword">public</span>:
    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Control()
    {
        This.Controls[<span class="stringliteral">"left"</span>] = This.Sensors[<span class="stringliteral">"left"</span>]-&gt;GetOutput();
        This.Controls[<span class="stringliteral">"right"</span>] = This.Sensors[<span class="stringliteral">"right"</span>]-&gt;GetOutput();
    }
};
<span class="preprocessor">#include &lt;map&gt;</span>
<span class="comment">// This is a Braitenberg with the control function overloaded so that the</span>
<span class="comment">// left sensor feeds the right motor, and the right sensor feeds the left</span>
<span class="comment">// motor.</span>
<span class="keyword">class </span>Braitenberg2b : <span class="keyword">public</span> Braitenberg
{
<span class="keyword">public</span>:
    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Control()
    {
        This.Controls[<span class="stringliteral">"left"</span>] = This.Sensors[<span class="stringliteral">"right"</span>]-&gt;GetOutput();
        This.Controls[<span class="stringliteral">"right"</span>] = This.Sensors[<span class="stringliteral">"left"</span>]-&gt;GetOutput();
    }
};

<span class="comment">// Sets up a simple simulation with a series of positioned dots and two</span>
<span class="comment">// Braitenberg vehicles.</span>
<span class="keyword">class </span>BraitenbergSimulation : <span class="keyword">public</span> Simulation
{
    Group&lt;WorldObject&gt; ExampleWorld;

<span class="keyword">public</span>:
    BraitenbergSimulation()
    {
        <span class="comment">// We set up the ExampleWorld by filling it with instances of</span>
        <span class="comment">// the two types of Braitenbergs.</span>
        ExampleWorld.push_back(<span class="keyword">new</span> Braitenberg2a);
        ExampleWorld.push_back(<span class="keyword">new</span> Braitenberg2b);

        <span class="comment">// Now the Dots are added, initialised with their locations in</span>
        <span class="comment">// the world.</span>
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(150.0, 100.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(200.0, 100.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(250.0, 100.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(300.0, 100.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(350.0, 100.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(400.0, 100.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(400.0, 150.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(400.0, 200.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(400.0, 250.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(400.0, 300.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(400.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(350.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(300.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(250.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(200.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(200.0, 400.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(200.0, 450.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(200.0, 500.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(200.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(250.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(300.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(350.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(400.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(450.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(550.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(600.0, 550.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(600.0, 500.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(600.0, 450.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(600.0, 400.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(600.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(550.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0, 350.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0, 300.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0, 250.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0, 200.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0, 150.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0, 100.0)));
        ExampleWorld.push_back(<span class="keyword">new</span> Dot(Vector2D(500.0,  50.0)));

        <span class="comment">// All the objects in our ExampleWorld Group have now been</span>
        <span class="comment">// configured and can now be added to the World.</span>
        Add(<span class="stringliteral">"ExampleWorld"</span>, ExampleWorld);

        <span class="comment">// Because we just want the braitenbergs to go on indefinitely,</span>
        <span class="comment">// the time limit is set to -1.</span>
        SetTimeSteps(-1);
    }
};

</pre></div> <hr size="1"><address style="align: right;"><small>Generated on Sun Feb 1 21:26:31 2004 for BEAST - Bioinspired Evolutionary Agent Simulation Toolkit by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
