<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BEAST - Bioinspired Evolutionary Agent Simulation Toolkit: worldobject.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>worldobject.h</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">* \file worldobject.h</span>
00003 <span class="comment">* \author Tom Carden</span>
00004 <span class="comment">* \author David Gordon</span>
00005 <span class="comment">* \addtogroup framework</span>
00006 <span class="comment">* Everything interactive in the simulation environment is derived from </span>
00007 <span class="comment">* WorldObject. Include this file if you wish to create your own</span>
00008 <span class="comment">* walls, scenery and other interactive objects.</span>
00009 <span class="comment">*/</span>
00010 
00011 <span class="preprocessor">#ifndef _WORLDOBJECT_H</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define _WORLDOBJECT_H</span>
00013 <span class="preprocessor"></span>
00014 <span class="preprocessor">#include &lt;cmath&gt;</span>
00015 <span class="preprocessor">#include &lt;iostream&gt;</span>
00016 <span class="preprocessor">#include &lt;string&gt;</span>
00017 
00018 <span class="preprocessor">#include "vector2d.h"</span>
00019 <span class="preprocessor">#include "<a class="code" href="drawable_8h.html">drawable.h</a>"</span>
00020 
00021 <span class="keyword">namespace </span>BEAST {
00022 
00028 <span class="comment">// Forward declaration for myWorld pointer</span>
00029 <span class="keyword">class </span>World;
00030 
<a name="l00041"></a><a class="code" href="classBEAST_1_1WorldObject.html">00041</a> <span class="keyword">class </span><a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a> : <span class="keyword">public</span> Drawable
00042 {
00043 <span class="keyword">public</span>:
00044     <a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>(<span class="keyword">const</span> <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp; l = <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>(0,0), <span class="keywordtype">double</span> o = 0.0,
00045                 <span class="keywordtype">double</span> d = <a class="code" href="group__framework.html#a10">DRAWABLE_RADIUS</a>, <span class="keywordtype">bool</span> so = <span class="keyword">false</span>):
00046         Drawable(l, o, d),
00047         Solid(solid),
00048         Dead(dead),
00049         InitRandom(initRandom),
00050         Moveable(moveable),
00051         Selectable(selectable),
00052         
00053         solid(so), dead(<span class="keyword">false</span>), initRandom(<span class="keyword">false</span>),
00054         moveable(<span class="keyword">true</span>), selectable(<span class="keyword">true</span>)
00055         {
00056             LogStream.<a class="code" href="classBEAST_1_1property.html#a2">init</a>(<span class="keyword">this</span>, &amp;WorldObject::GetLogStream, &amp;WorldObject::_SetLogStream);
00057         }
00058 
00059     <a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>(<span class="keyword">const</span> <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp; l, <span class="keywordtype">double</span> o, std::vector&lt;Vector2D&gt; e,
00060                 <span class="keywordtype">bool</span> so = <span class="keyword">false</span>):
00061         Drawable(l, o, e),
00062         Solid(solid),
00063         Dead(dead),
00064         InitRandom(initRandom),
00065         Moveable(moveable),
00066         Selectable(selectable),
00067         solid(so), dead(<span class="keyword">false</span>), initRandom(<span class="keyword">false</span>),
00068         moveable(<span class="keyword">true</span>), selectable(<span class="keyword">true</span>),
00069         absoluteEdges(GetEdges())
00070         {
00071             LogStream.<a class="code" href="classBEAST_1_1property.html#a2">init</a>(<span class="keyword">this</span>, &amp;WorldObject::GetLogStream, &amp;WorldObject::_SetLogStream);
00072         }
00073 
00074     ~<a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>() {}
00075 
00076     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1WorldObject.html#a3">Init</a>();
00077 
00078     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    Update(){ SetOrientation(<a class="code" href="group__utilities.html#a18">bound</a>(0.0, TWOPI, GetOrientation())); }
00079     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1WorldObject.html#a5">Interact</a>(<a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>*);
00080     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    UniInteract(<a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>*){}
00081     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    OnCollision(<a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>* r){}
00082 
00083     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classBEAST_1_1WorldObject.html#a8">IsInside</a>(<span class="keyword">const</span> <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp; vec)<span class="keyword">const</span>;
00084     <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>        <a class="code" href="classBEAST_1_1WorldObject.html#a10">GetNearestPoint</a>(<span class="keyword">const</span> <a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>* i) 
00085                     { <span class="keywordflow">return</span> <a class="code" href="classBEAST_1_1WorldObject.html#a10">GetNearestPoint</a>(i-&gt;GetLocation()); }
00086     <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>        <a class="code" href="classBEAST_1_1WorldObject.html#a10">GetNearestPoint</a>(<span class="keyword">const</span> <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp;, 
00087                                     <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp; r=VECTOR2D_FAKE_REFERENCE)<span class="keyword">const</span>;
00088     <span class="keywordtype">bool</span>            <a class="code" href="classBEAST_1_1WorldObject.html#a11">Intersects</a>(<span class="keyword">const</span> <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp; l1, <span class="keyword">const</span> <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp; l2,
00089                                <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>&amp; r = VECTOR2D_FAKE_REFERENCE)<span class="keyword">const</span>;
00090 
00091     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    OnClick(){}
00092     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    OnSelect(){}
00093 
00094     <span class="keywordtype">bool</span>            IsSolid()<span class="keyword">const</span>          { <span class="keywordflow">return</span> solid; }
00095     <span class="keywordtype">bool</span>            IsDead()<span class="keyword">const</span>           { <span class="keywordflow">return</span> dead; }
00096     <span class="keywordtype">bool</span>            IsInitRandom()<span class="keyword">const</span>     { <span class="keywordflow">return</span> initRandom; }
00097     <span class="keywordtype">bool</span>            IsMoveable()<span class="keyword">const</span>       { <span class="keywordflow">return</span> moveable; }
00098     <span class="keywordtype">bool</span>            IsSelectable()<span class="keyword">const</span>     { <span class="keywordflow">return</span> selectable; }
00099 
00100     <span class="keywordtype">void</span>            SetSolid(<span class="keywordtype">bool</span> s)        { solid = s; }
00101     <span class="keywordtype">void</span>            SetDead(<span class="keywordtype">bool</span> d)         { dead = d; }
00102     <span class="keywordtype">void</span>            SetInitRandom(<span class="keywordtype">bool</span> r)   { initRandom = r; }
00103     <span class="keywordtype">void</span>            SetMoveable(<span class="keywordtype">bool</span> m)     { moveable = m; }
00104     <span class="keywordtype">void</span>            SetSelectable(<span class="keywordtype">bool</span> s)   { selectable = s; }
00105 
00106     <span class="keywordtype">void</span>            _SetLogStream(std::ostream&amp; o) { logStream = &amp;o; }
00107     <span class="keyword">static</span> <span class="keywordtype">void</span>     SetLogStream(std::ostream&amp; o) { logStream = &amp;o; }
00108     std::ostream&amp;   GetLogStream()<span class="keyword">const</span>     { <span class="keywordflow">return</span> *logStream; }
00109 
<a name="l00111"></a><a class="code" href="classBEAST_1_1WorldObject.html#a26">00111</a>     <span class="keyword">virtual</span> std::string <a class="code" href="classBEAST_1_1WorldObject.html#a26">ToString</a>()<span class="keyword">const</span> { <span class="keywordflow">return</span> <span class="stringliteral">""</span>; }
00112 
00113     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1WorldObject.html#a27">Serialise</a>(std::ostream&amp;)<span class="keyword">const</span>;
00114     <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classBEAST_1_1WorldObject.html#a28">Unserialise</a>(std::istream&amp;);
00115 
00116     auto_property&lt;bool&gt; Solid;
00117     auto_property&lt;bool&gt; Dead;
00118     auto_property&lt;bool&gt; InitRandom;
00119     auto_property&lt;bool&gt; Moveable;
00120     auto_property&lt;bool&gt; Selectable;
00121 
00122     property&lt;WorldObject, std::ostream, std::ostream&amp;&gt; LogStream;
00123 
00124 <span class="keyword">private</span>:
00125     <span class="keywordtype">bool</span>            solid;      
00126     <span class="keywordtype">bool</span>            dead;       
00127     <span class="keywordtype">bool</span>            initRandom; 
00128     <span class="keywordtype">bool</span>            moveable;   
00129     <span class="keywordtype">bool</span>            selectable; 
00130 
00131     <span class="keyword">static</span> <span class="keywordtype">bool</span>     CalcIntersect(<span class="keyword">const</span> Vector2D&amp;, <span class="keyword">const</span> Vector2D&amp;,
00132                                   <span class="keyword">const</span> Vector2D&amp;, <span class="keyword">const</span> Vector2D&amp;,
00133                                   Vector2D&amp; r = VECTOR2D_FAKE_REFERENCE);
00134 
00135     <span class="keyword">static</span> Vector2D GetNearestPointOnLine(<span class="keyword">const</span> Vector2D&amp;,
00136                                           <span class="keyword">const</span> Vector2D&amp;,
00137                                           <span class="keyword">const</span> Vector2D&amp;);
00138     
00139 
00141     std::vector&lt;Vector2D&gt; absoluteEdges;
00142 
00143     <span class="keywordtype">void</span>            CalcAbsoluteEdges();
00144     
00145     <span class="keyword">static</span> std::ostream* logStream; 
00146     <span class="keyword">static</span> Vector2D VECTOR2D_FAKE_REFERENCE; 
00147 };
00148 
<a name="l00153"></a><a class="code" href="classBEAST_1_1Wall.html">00153</a> <span class="keyword">class </span><a class="code" href="classBEAST_1_1Wall.html">Wall</a> : <span class="keyword">public</span> <a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>
00154 {
00155 <span class="keyword">public</span>:
<a name="l00163"></a><a class="code" href="classBEAST_1_1Wall.html#a0">00163</a>     <a class="code" href="classBEAST_1_1Wall.html#a0">Wall</a>(<a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a> pos = <a class="code" href="classBEAST_1_1Vector2D.html">Vector2D</a>(), <span class="keywordtype">double</span> w = 50.0, <span class="keywordtype">double</span> h = 50.0, <span class="keywordtype">double</span> o = PI/2):
00164     <a class="code" href="classBEAST_1_1WorldObject.html">WorldObject</a>(pos, o, <a class="code" href="classBEAST_1_1Wall.html#e0">GetSides</a>(w, h), true)
00165     {
00166         SetMoveable(<span class="keyword">false</span>);
00167         SetSelectable(<span class="keyword">false</span>);
00168     }
00169 
00170     <span class="keyword">static</span> std::vector&lt;Vector2D&gt; <a class="code" href="classBEAST_1_1Wall.html#e0">GetSides</a>(<span class="keywordtype">double</span> w, <span class="keywordtype">double</span> h);
00171 
00172     <a class="code" href="group__serialisation.html#a15">IMPLEMENT_SERIALISATION</a>(<span class="stringliteral">"Wall"</span>, WorldObject)
00173 };
00174 
00179 } <span class="comment">// namespace BEAST</span>
00180 
00181 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Feb 1 21:25:35 2004 for BEAST - Bioinspired Evolutionary Agent Simulation Toolkit by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
